systemctl - 管理系统服务

一、管理系统服务

systemctl [command] [unit]

[command]
    start       :启动服务
    stop        :关闭服务
    restart     :重启服务
    reload      :重新加载配置
    enable      :开机启动
    disable     :不开机启动
    status      :查看服务状态
    is-active   :查看服务是否在运行中
    is-enabled  :查看服务是否开机启动

# 服务的状态
active(running)  :运行中
active(exited)   :仅执行一次既正常结束的服务
active(waiting)  :执行中但正在等待被触发
inactive         :不在运行中

# 服务的默认状态
enable   :开机时启动
disable  :开机时不启动
static   :不能开机启动, 但能被其他开机启动的服务唤醒
mask     :服务被注销无法开机启动, 通过systemctl unmask方式改回默认状态

# 示例一
# 启动 atd 服务
systemctl start atd.service

# 示例二
# 查询 atd 服务的状态
systemctl status atd.service

# 示例三
# 停止 atd 服务
systemctl stop atd.service

# 示例四
# 注销 cups.service 服务
# 注销的本质是将启动脚本链接到/dev/null
systemctl stop cups.service
systemctl mask cups.service

# 示例五
# 恢复 cups.service 服务
systemctl unmask cups.service



二、查看系统上有哪些服务

systemctl [command] [--type=TYPE] [--all]

[command]
    list-units       :依据unit显示目前已启动的服务, 添加--all选项则显示所有
    list-unit-files  :依据/usr/lib/systemd/system目录内的文件, 将所有文件列表说明

Type  :unit的类型, service, target, socket 等...

# 示例一
# 查看系统上已启动的unit
systemctl

# 示例二
# 列出所有已安装的服务
systemctl list-unit-files

# 示例三
# 列出所有的service类型的unit
systemctl list-units --type=service --all

# 示例四
# 查询名称为包含cpu的服务
systemctl list-units --type=service --all | grep cpu
